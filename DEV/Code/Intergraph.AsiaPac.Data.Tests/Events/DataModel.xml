<?xml version="1.0" encoding="utf-8" ?>
<DataModel name="EventDataModel" xmlns="http://schemas.intergraph.com/asiapac/cad/datamodel" xmlns:cad="http://schemas.intergraph.com/asiapac/cad/datamodel">

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Main Agency Event object
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Object name="AgencyEvent" dbTable="AEVEN">
		<Property name="AgencyEventId" dbColumn="num_1"/>
		<Property name="CommonEventId" dbColumn="eid"/>
		<Object name="Agency" type="AgencyType"/>
		<Object name="Type" type="EventTypeType"/>
		<Object name="SubType" type="EventSubTypeType"/>
		<Object name="Address" type="EventAddressType"/>
		<Object name="Location" type="EventLocationType"/>
		<Object name="Status" type="EventStatusType"/>
		<Object name="Timeline" type="EventTimelineType"/>
	</Object>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Agency type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="AgencyType" dbTable="AEVEN">
		<Property name="agencyId" dbColumn="ag_id"/>
		<Property name="dispatchGroup" dbColumn="dgroup"/>
	</Type>
	
	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Common Event Address type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventAddressType" dbTable="EVENT">
		<Property name="CommonPlaceName" dbColumn="ecompl" dbAlias="loc_common_placename"/>
		<Property name="ApartmentNumber" dbColumn="eapt" dbAlias="loc_apartment"/>
		<Property name="StreetNumber" dbColumn="estnum" dbAlias="loc_street_num"/>
		<Property name="DirectionPrefix" dbColumn="edirpre" dbAlias="loc_direction_prefix"/>
		<Property name="StreetName" dbColumn="efeanme" dbAlias="loc_street"/>
		<Property name="StreetType" dbColumn="efeatyp" dbAlias="loc_street_type"/>
		<Property name="DirectionSuffix" dbColumn="edirsuf" dbAlias="loc_direction_suffix"/>
		<Property name="CrossStreet1" dbColumn="xstreet1" dbAlias="loc_xstreet1"/>
		<Property name="CrossStreet2" dbColumn="xstreet2" dbAlias="loc_xstreet2"/>
		<Property name="Area" dbColumn="earea" dbAlias="loc_area"/>
		<Property name="Municipality" dbColumn="emun" dbAlias="loc_municipality"/>
		<Property name="Comments" dbColumn="loc_com" dbAlias="loc_comments"/>
		<Property name="Mslink" dbColumn="fea_mslink" dbAlias="loc_mslink"/>
		<Property name="Verified" dbColumn="loc_ver" dbAlias="loc_verified"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Common Event Location type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventLocationType" dbTable="EVENT">
		<Property name="X" dbColumn="x_cord"/>
		<Property name="Y" dbColumn="y_cord"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Common Event type type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventTypeType" dbTable="AEVEN">
		<Property name="Code" dbColumn="tycod"/>
		<Property name="Description" dbColumn="typ_eng"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Common Event sub-type type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventSubTypeType" dbTable="AEVEN">
		<Property name="Code" dbColumn="sub_tycod"/>
		<Property name="Description" dbColumn="sub_eng"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Event status type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventStatusType" dbTable="AEVEN">
		<Property name="StatusCode" dbColumn="event_status"/>
		<Property name="AlarmLevel" dbColumn="alarm_lev"/>
		<Property name="PendingTimer" dbColumn="pend_dts"/>
		<Object name="Units" dbTable="AEVEN">
			<Property name="AssignedUnits" dbColumn="assigned_units"/>
			<Property name="DispatchAssignedUnit" dbColumn="dispass_unit"/>
		</Object>
		<Object name="Hold" dbTable="AEVEN">
			<Property name="Type" dbColumn="hold_type"/>
			<Property name="ForUnit" dbColumn="hold_unt"/>
			<Property name="Timestamp" dbColumn="hold_dts"/>
		</Object>
	</Type>

	<Object name="EventStatusObj" type="EventStatus"/>
	
	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Event timeline type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="EventTimelineType" dbTable="AEVEN">
		<Property name="Created" dbColumn="ad_ts"/>
		<Property name="Dispatched" dbColumn="ds_ts"/>
		<Property name="Enroute" dbColumn="en_ts"/>
		<Property name="Arrived" dbColumn="ar_ts"/>
		<Property name="Transport" dbColumn="tr_ts"/>
		<Property name="TransportArrived" dbColumn="ta_ts"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Caller type
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<Type name="CallerType" dbTable="EVENT">
		<Property name="Name" dbColumn="clname"/>
		<Property name="Number" dbColumn="clrnum"/>
		<Property name="StreetAddress" dbColumn="cstr_add"/>
		<Property name="City" dbColumn="ccity"/>
		<Property name="Source" dbColumn="call_sour"/>
	</Type>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	AEVEN Metadata
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<TableMetadata name="AEVEN">
		<Filters>
			<Filter name="default">AEVEN.open_and_curent = 'T' and AEVEN.curent in ('T', 'O')</Filter>
		</Filters>
		<Keys>
			<Key foreignKey="eid" references="EVENT" referenceKey="eid"/>
		</Keys>
	</TableMetadata>

	<!--
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	EVENT Metadata
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->

	<TableMetadata name="EVENT">
		<Filters>
			<Filter name="default">EVENT.curent in ('T', 'O')</Filter>
		</Filters>
		<Keys>
			<Key foreignKey="eid" references="AEVEN" referenceKey="eid"/>
		</Keys>
	</TableMetadata>

</DataModel>
